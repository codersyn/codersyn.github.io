---
title: 如何科学的使用Debian
date: 2022-05-21 19:33:36
tags:
---

### 介绍

在本教程中，将学习一个全新的Debian服务器如何进行一些初始的服务器设置：

+ 以 **root** 用户身份登录

+ 创建具有管理员权限的新用户

+ 设置基本防火墙

## 步骤 1 — 以 Root 用户身份登录

以 **root** 用户身份登录：

```bash
ssh root@your_server_ip
```

### 关于Root

**root** 用户是 Linux 环境中具有非常广泛的特权的管理用户。由于 **root** 帐户的权限很高，*因此不建议*长期使用它，某些时候一些误操作可能会对系统造成不可挽回的损失。

## 步骤 2 — 创建新用户

此示例创建一个名为 **syn** 的新用户，你可将其替换为任意你喜欢的用户名：

```bash
adduser syn
```

系统会让你设置一个密码，并要求填入一些基本信息，除密码外其他非必填，可按回车跳过。

## 步骤 3 — 授予管理员权限

现在，我们创建了一个具有常规帐户权限的新用户，但是我们有时可能需要使用它执行管理任务。

为了避免必须注销普通用户并以**root**帐户重新登录，我们可以为普通帐户设置所谓的*超级用户*或者说**root**权限。

以 **root 用户身份**运行以下命令，将新用户添加到 **sudo** 组：

```bash
usermod -aG sudo syn
```

现在，当你以普通用户身份登录时，你可以在命令之前键入`sudo`以超级用户权限运行命令。

## 步骤 4 — 设置基本防火墙

Debian 服务器可以使用防火墙来确保只允许与特定服务建立某些连接，在本指南中，我们将安装和使用 UFW 防火墙来帮助设置防火墙策略和管理。

我们可以使用包管理器来安装 UFW，更新本地索引以检索有关可用软件包的最新信息，可以通过键入以下内容安装 UFW 防火墙：

```bash
apt update
apt install ufw
```

可以通过键入以下内容列出所有UFW防火墙可用的应用程序配置文件：

```bash
ufw app list
```

我们需要确保防火墙允许SSH连接，以便下次可以重新登录。通过键入以下内容来允许连接：

```bash
ufw allow OpenSSH
```

之后，我们可以通过键入以下内容来启用防火墙：

```bash
ufw enable
```

通过键入以下内容看到UFW已经允许 SSH 连接：

```bash
ufw status
```

```bash
OutputStatus: active

To             Action   From
--             ------   ----
OpenSSH          ALLOW    Anywhere
OpenSSH (v6)     ALLOW    Anywhere (v6)
```

由于**防火墙当前阻止除 SSH 之外的所有连接**，因此，如果安装和配置其他服务，则需要调整防火墙设置以允许可接受的流量进入。

## 步骤 5 — 为普通用户启用外部访问

现在我们有一个日常使用的常规用户，我们需要确保我们可以直接通过SSH进入帐户。

### 如果 root 帐户使用密码身份验证

如果你*使用密码*登录到 **root** 帐户，则会为 SSH 启用密码身份验证。

现在，打开一个新的终端会话，并使用你的新用户名通过密码登录：

```bash
ssh syn@your_server_ip
```

输入用户的密码后，你将会登录。

### 如果 root 账户使用 SSH 密钥身份验证

如果你*使用 SSH 密钥*登录到 **root** 帐户，则会为 SSH *禁用*密码身份验证。你需要将本地公钥的副本添加到新用户的文件中才能成功登录。

由于公钥已经在服务器上的 **root** 帐户文件中，因此我们可以`cp`命令将该文件和目录复制到新用户目录中。之后，我们可以使用`chown`命令调整文件的所有权。

请把`syn`改为你自己的用户名：

```bash
cp -r ~/.ssh /home/syn
chown -R syn:syn /home/syn/.ssh
```

该命令将整个目录复制到新用户的主目录，并将这个目录（以及其中的所有内容）的所有者更改为你指定的（默认情况下，Debian 会创建一个与你的用户名同名的组）用户。

现在，打开一个新的终端会话，并使用你的新用户名通过SSH登录：

```bash
ssh syn@your_server_ip
```

现在你应该在不使用密码的情况下即可登录到新用户。

请记住，如果你需要使用管理权限运行命令，请在命令之前键入`sudo`，如下所示：

```bash
sudo command_to_run
```

## 完结

此时，你的服务器已经有了坚实的基础，你现在可以在服务器上安装所需的任何软件。
